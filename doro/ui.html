<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf8">
	<meta name="viewport" content="width=414, user-scalable=no">
	<title>Doro</title>

	<!--<link rel="manifest" href="manifest.json">-->
	<link rel="stylesheet" href="css/ui.css"/>
	<script src="../1px.js/1px.js"></script>
</head>

<body>

<main class="main">
	<header class="ui-top-app-bar" style="
    /* display: none; */
">


		<div flex=""></div>

		<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
			<path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
			<path d="M0 0h24v24H0z" fill="none"></path>
		</svg>


		<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
			<path d="M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"></path>
			<path fill="none" d="M0 0h24v24H0z"></path>
		</svg>


		<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
			<path d="M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z"></path>
			<path d="M0 0h24v24H0z" fill="none"></path>
		</svg>


	</header>


	<ui-scrollview id="a">
		<section class="contents">
			<section class="line"></section>
			<doro-km-page class="km-pages" *foreach="kms as km" [km]="km"></doro-km-page>
			<div style="height: 300px"></div>
		</section>


		<section class="contents">
			<section class="alert-divider" id="b">
				<h1></h1>
			</section>

			<div style="height: 100px"></div>

			<doro-report></doro-report>

			<section class="line log"></section>

			<section class="km-pages" *foreach="arr2 as r">
				<section class="contents">
					<h1 class="date">2019. 08. 14</h1>
					<section class="contents">
						<doro-log class="reminder log">
							<section>
								<div class="icon"></div>
								<h1>주유</h1>
								<div flex></div>
								<h2>1250km</h2>
							</section>
							<div class="divider"></div>
							<section>
								<div class="icon"></div>
								<h1>논현주유소</h1>
								<div flex></div>
								<h2>서울시 강남구 논현동</h2>
							</section>
						</doro-log>
						<div class="left-kms">60000km</div>
					</section>


					<section class="contents">
						<doro-log class="reminder log">
							<section>
								<div class="icon"></div>
								<h1>운행</h1>
								<div flex></div>
								<h2>25km</h2>
							</section>
							<div class="divider"></div>
							<section>
								<div class="icon"></div>
								<h1>집</h1>
								<div flex></div>
								<h2>서울시 강남구 논현동</h2>
							</section>
						</doro-log>
						<div class="left-kms">60000km</div>
					</section>


					<section class="contents">
						<doro-log class="reminder log">
							<section>
								<div class="icon"></div>
								<h1>주유</h1>
								<div flex></div>
								<h2>1250km</h2>
							</section>
							<div class="divider"></div>
							<section>
								<div class="icon"></div>
								<h1>논현주유소</h1>
								<div flex></div>
								<h2>서울시 강남구 논현동</h2>
							</section>
						</doro-log>
						<div class="left-kms">60000km</div>
					</section>


					<section class="contents">
						<doro-log class="reminder log">
							<section>
								<div class="icon"></div>
								<h1>운행</h1>
								<div flex></div>
								<h2>25km</h2>
							</section>
							<div class="divider"></div>
							<section>
								<div class="icon"></div>
								<h1>집</h1>
								<div flex></div>
								<h2>서울시 강남구 논현동</h2>
							</section>
						</doro-log>
						<div class="left-kms">60000km</div>
					</section>


				</section>
			</section>
		</section>
		<div style="height: 116px"></div>

	</ui-scrollview>

	<footer class="my-car">
		<div class="background"></div>
		<section class="content">
			<div class="btn-car">
				<div class="icon-car"></div>
			</div>

			<h1>{{ currentKm }}Km</h1>
			<div class="line"></div>
			<div flex></div>
			<p><span>차량 현재 누적거리: 13510km</span></p>

			<div class="btn-plus">
				<div class="icon-plus-h"></div>
				<div class="icon-plus-v"></div>
			</div>
		</section>
	</footer>
</main>


<script>
$module.component("doro-km-page", function(WebComponent) {

	//language=HTML
	WebComponent.template`
		<template class="reminder">
			<div class="space-half-page"></div>
			<section class="contents">
				<doro-reminder *foreach="km.todos as todo" [todo]="todo"></doro-reminder>
				<div class="left-kms" [hidden]="!km.todos.length">{{km.km}}km</div>
				<div class="kms">{{km.km}}km</div>
				<doro-tip *if="km.todos.length === 0"></doro-tip>

			</section>
		</template>
	`
})

$module.component("doro-reminder", function(WebComponent) {

	//language=HTML
	WebComponent.template`
		<template class="reminder" [class.right]="todo[1] === todo[2]">
			<section>
				<div class="top"></div>
				<div class="icon">
					<svg xmlns="http://www.w3.org/2000/svg" id="restore" width="290.467" height="290.468" viewBox="0 0 290.467 290.468">
						<defs>
							<style>
								.cls-restore {
									fill: #ffaa21
								}
							</style>
						</defs>
						<path id="Path_1495" d="M1349.274 693.432l-47.835 47.836-41.845-14.949-14.949-41.843 47.838-47.838A90.126 90.126 0 0 0 1177.809 749a42.672 42.672 0 0 0-3.762 3.327l-98.247 98.247a42.1 42.1 0 0 0 59.539 59.538l98.246-98.244a42.621 42.621 0 0 0 3.325-3.76 90.126 90.126 0 0 0 112.361-114.675z" class="cls-restore" data-name="Path 1495" transform="translate(-1063.471 -631.976)"/>
					</svg>
				</div>
				<h1>{{ todo[0] }}</h1>
				<div flex></div>
				<h2>{{ todo[2] }}km 마다</h2>

				<div style="position: relative; left:8px">
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#ccc">
						<path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
						<path d="M0 0h24v24H0z" fill="none"/>
					</svg>
				</div>

			</section>
		</template>`
});


$module.component("doro-report", function(WebComponent) {

	//language=HTML
	WebComponent.template`
		<template>
			<div class="top"></div>

			<header>
				<h1>2월 통계</h1>
			</header>

			<section>
				<dl>
					<dt>주유통계</dt>
					<dd>12.3km/L</dd>
				</dl>

				<dl>
					<dt>주유량</dt>
					<dd>12.3km/L</dd>
				</dl>

				<dl>
					<dt>주유연비</dt>
					<dd>210,000원</dd>
				</dl>

				<dl>
					<dt>주유시간</dt>
					<dd>98:23</dd>
				</dl>

				<dl>
					<dt>주행거리</dt>
					<dd>340Km</dd>
				</dl>

				<dl>
					<dt>총지출</dt>
					<dd>270,000원</dd>
				</dl>
			</section>
		</template>`
})
</script>


<script>
$module.component("doro-tip", function(WebComponent) {

//language=HTML
	WebComponent.template`
		<template>
			<div class="top"></div>

			<header>
				<h3>아무도 초보에게 알려주지 않았던 운전 팁</h3>
				<h1>사이드 미러 조정하기 !</h1>
				<div class="date">2019 . 08 . 14</div>
			</header>

			<section>
				<p>시동을 걸고 출발하기 전 운전석을 본인에게 딱 맞도록 조정해야 합니다. 첫 번째. 시트 포지션을 자신의 몸에 맞게 조정합니다.</p>
				<p class="more" style="
    text-align: right;
    color: #ffaa21;
    font-weight: bold;
    font-size: 12px;
">...더보기</p>

			</section>
		</template>
	`
})
</script>


<script>
let kms = [];
for (let i = 1; i <= 100; i++) {
	kms.push({
		km: i * 1000,
		todos: []
	});
}


let todos = [
	["엔진오일", "10000"],
	["엔진 플러싱(세정)", "20000"],
	["점화플러그 & 코일,케이블", "30000"],
	["리스톤링 및 연소실 세척작업", "30000"],
	["가열(예열)플러그", "40000"],
	["흡기라인세척 작업", "30000"],
	["타이밍밸트", "80000"],
	["타이밍체인", "200000"],
	["구동벨트", "40000"],
	["엔진/밋션 마운팅 ", "100000"],
	["변속기(미션)오일", "40000"],
	["디프렌션오일", "40000"],
	["연료휠터", "30000"],
	["연료라인/인젝터세정", "30000"],
	["연료탱크 에어필터", "40000"],
	["브레이크패드", "30000"],
	["브레이크오일", "40000"],
	["브레이크 디스크 연마", "80000"],
	["부동액", "40000"],
	["냉각라인 세정", "40000"],
	["히터&에어컨휠터", "12000"],
	["에어컨필터", "5000"],
	["히터클리닉", "5000"],
	["와이퍼", "8000"],
	["에어컨 냉매 보충", "10000"],
	["에어컨 가스 및 냉동유 교환", "40000"],
	["통풍씨트 휠터", "40000"],
	["파워스티어링오일", "40000"],
	["타이어위치교환", "10000"],
	["휠얼라이먼트", "20000"],
	["배터리", "60000"],
];

todos.forEach(todo => {
	todo[1] = +todo[1];
});
todos.sort((a, b) => (a[1] - b[1]));


let t = [];
todos.forEach(todo => {
	for (let i = 0; i < 10; i++) {
		let _todo = todo.slice();
		_todo[2] = +_todo[1];
		_todo[1] = +_todo[1] * i;

		let index = _todo[1] / 1000 - 1;

		if (kms[index]) {
			kms[index].todos.push(_todo);
		}
		// t.push(_todo);
	}
});

todos = t;


kms.reverse();


let app = $module.compile(document.body);
app.arr = Array(8).fill(0);
app.arr2 = Array(5).fill(0);

app.kms = kms;


setTimeout(function() {
	let b = document.getElementById("b");
	let a = document.getElementById("a");
	let fix = a.scrollTop = b.getBoundingClientRect().bottom - a.offsetHeight + 120 + 10;

	a.onscroll = function() {
		app.currentKm = parseInt(fix - a.scrollTop);

		console.log(app.currentKm);
	}
});

</script>
</body>
</html>