<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf8">
	<meta name="viewport" content="width=414, user-scalable=no">
	<title>Doro</title>

	<!--<link rel="manifest" href="manifest.json">-->
	<link rel="stylesheet" href="css/ui.css"/>
	<script src="../1px.js/1px.js"></script>
</head>

<body>

<main class="main">


	<ui-scrollview id="a">
		<section class="contents">
			<section class="line"></section>
			<doro-km-page class="km-pages" *foreach="kms as km" [km]="km"></doro-km-page>
			<div style="height: 300px"></div>
		</section>


		<section class="contents">
			<doro-report></doro-report>

			<section class="alert-divider" id="b">
				<h1>현재까지 누적 데이터 확인</h1>
			</section>
			<div style="height: 150px"></div>

			<section class="line log"></section>


			<section class="km-pages" *foreach="arr2 as r">
				<section class="contents">
					<h1 class="date">2019. 08. 14</h1>
					<section class="contents">
						<doro-log class="reminder log">
							<section>
								<div class="icon"></div>
								<h1>주유</h1>
								<div flex></div>
								<h2>1250km</h2>
							</section>
							<div class="divider"></div>
							<section>
								<div class="icon"></div>
								<h1>논현주유소</h1>
								<div flex></div>
								<h2>서울시 강남구 논현동</h2>
							</section>
						</doro-log>
						<div class="left-kms">60000km</div>
					</section>


					<section class="contents">
						<doro-log class="reminder log">
							<section>
								<div class="icon"></div>
								<h1>운행</h1>
								<div flex></div>
								<h2>25km</h2>
							</section>
							<div class="divider"></div>
							<section>
								<div class="icon"></div>
								<h1>집</h1>
								<div flex></div>
								<h2>서울시 강남구 논현동</h2>
							</section>
						</doro-log>
						<div class="left-kms">60000km</div>
					</section>


					<section class="contents">
						<doro-log class="reminder log">
							<section>
								<div class="icon"></div>
								<h1>주유</h1>
								<div flex></div>
								<h2>1250km</h2>
							</section>
							<div class="divider"></div>
							<section>
								<div class="icon"></div>
								<h1>논현주유소</h1>
								<div flex></div>
								<h2>서울시 강남구 논현동</h2>
							</section>
						</doro-log>
						<div class="left-kms">60000km</div>
					</section>


					<section class="contents">
						<doro-log class="reminder log">
							<section>
								<div class="icon"></div>
								<h1>운행</h1>
								<div flex></div>
								<h2>25km</h2>
							</section>
							<div class="divider"></div>
							<section>
								<div class="icon"></div>
								<h1>집</h1>
								<div flex></div>
								<h2>서울시 강남구 논현동</h2>
							</section>
						</doro-log>
						<div class="left-kms">60000km</div>
					</section>


				</section>
			</section>
		</section>
		<div style="height: 116px"></div>

	</ui-scrollview>

	<footer class="my-car">
		<div class="background"></div>
		<section class="content">
			<div class="btn-car">
				<div class="icon-car"></div>
			</div>

			<h1>{{ currentKm }}Km</h1>
			<div class="line"></div>
			<div flex></div>
			<p>
				<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
					<defs>
						<style>
							.cls-1 {
								opacity: .3
							}

							.cls-2 {
								fill: none
							}

							.cls-3 {
								fill: #fff
							}
						</style>
					</defs>
					<g id="baseline-error_outline-24px" class="cls-1">
						<path id="Path_1385" d="M0 0h16v16H0z" class="cls-2" data-name="Path 1385"/>
						<path id="Path_1386" d="M8 10.667h1.333V12H8zm0-5.334h1.333v4H8zM8.66 2a6.667 6.667 0 1 0 6.673 6.667A6.663 6.663 0 0 0 8.66 2zm.007 12A5.333 5.333 0 1 1 14 8.667 5.332 5.332 0 0 1 8.667 14z" class="cls-3" data-name="Path 1386" transform="translate(-.667 -.667)"/>
					</g>
				</svg>

				<span>위 라인은 당시 차량의 누적 주행거리를 나타냅니다.</span>
			</p>

			<div class="btn-plus">
				<div class="icon-plus-h"></div>
				<div class="icon-plus-v"></div>
			</div>
		</section>
	</footer>
</main>


<script>
$module.component("doro-km-page", function(WebComponent) {

	//language=HTML
	WebComponent.template`
		<template class="reminder">
			<div class="space-half-page"></div>
			<section class="contents">
				<doro-reminder *foreach="km.todos as todo" [todo]="todo"></doro-reminder>
				<div class="left-kms" [hidden]="!km.todos.length">{{km.km}}km</div>
				<div class="kms">{{km.km}}km</div>
				<doro-tip *if="km.todos.length === 0"></doro-tip>

			</section>
		</template>
	`
})

$module.component("doro-reminder", function(WebComponent) {

	//language=HTML
	WebComponent.template`
		<template class="reminder" [class.right]="todo[1] === todo[2]">
			<section>
				<div class="icon">
					<svg xmlns="http://www.w3.org/2000/svg" id="check" width="24" height="24" viewBox="0 0 278.501 278.501">
						<defs>
							<style>
								.cls-1 {
									fill: fff
								}
							</style>
						</defs>
						<path id="Path_1490" d="M1012.408 758.948l3.816-36.542-33.573-14.939a4.84 4.84 0 0 1-2.46-2.458l-14.934-33.573-36.549 3.821a4.872 4.872 0 0 1-3.34-.9l-29.754-21.563-29.752 21.563a4.881 4.881 0 0 1-3.34.9l-36.552-3.821-14.934 33.573a4.8 4.8 0 0 1-2.458 2.453l-33.573 14.944 3.816 36.542a4.853 4.853 0 0 1-.9 3.345l-21.563 29.752 21.568 29.755a4.853 4.853 0 0 1 .9 3.345l-3.816 36.539 33.573 14.939a4.839 4.839 0 0 1 2.458 2.46l14.934 33.573 36.552-3.821c.163 0 .332-.026.482-.026a4.811 4.811 0 0 1 2.838.926l29.771 21.56 29.754-21.56a4.839 4.839 0 0 1 3.34-.9l36.549 3.821 14.934-33.573a4.809 4.809 0 0 1 2.46-2.455l33.573-14.944-3.816-36.539a4.836 4.836 0 0 1 .9-3.345l21.56-29.754-21.56-29.752a4.837 4.837 0 0 1-.904-3.346zm-46.565-1.241l-95.851 95.853a4.845 4.845 0 0 1-6.846 0l-41.1-41.1a4.845 4.845 0 0 1 0-6.854l13.7-13.652a4.84 4.84 0 0 1 6.835 0l23.988 23.938 78.731-78.729a4.839 4.839 0 0 1 6.846 0l13.7 13.7a4.839 4.839 0 0 1-.003 6.844z" class="cls-1" data-name="Path 1490" transform="translate(-756.363 -652.793)"/>
					</svg>
				</div>
				<h1>{{ todo[0] }}</h1>
				<div flex></div>
				<h2>{{ todo[2] }}km 마다</h2>
			</section>
		</template>`
});


$module.component("doro-report", function(WebComponent) {

	//language=HTML
	WebComponent.template`
		<template>
			<div class="top"></div>

			<header>
				<h1>2월 통계</h1>
			</header>

			<section>
				<dl>
					<dt>주유통계</dt>
					<dd>12.3km/L</dd>
				</dl>

				<dl>
					<dt>주유량</dt>
					<dd>12.3km/L</dd>
				</dl>

				<dl>
					<dt>주유연비</dt>
					<dd>210,000원</dd>
				</dl>

				<dl>
					<dt>주유시간</dt>
					<dd>98:23</dd>
				</dl>

				<dl>
					<dt>주행거리</dt>
					<dd>340Km</dd>
				</dl>

				<dl>
					<dt>총지출</dt>
					<dd>270,000원</dd>
				</dl>
			</section>
		</template>`
})
</script>


<script>
$module.component("doro-tip", function(WebComponent) {

//language=HTML
	WebComponent.template`
		<template>
			<div class="top"></div>

			<header>
				<h3>아무도 초보에게 알려주지 않았던 운전 팁</h3>
				<h1>사이드 미러 조정하기 !</h1>
				<div class="date">2019 . 08 . 14</div>
			</header>

			<section>
				<p>시동을 걸고 출발하기 전 운전석을 본인에게 딱 맞도록 조정해야 합니다. 첫 번째. 시트 포지션을 자신의 몸에 맞게 조정합니다. 등 받이에 등을 붙인 채 스티어링 휠 12시 방향으로 손을 뻗었을 때, 손바닥이 닿고. 브레이크를 끝까지 밟았을 때 무릎이 살짝 굽혀지는 정도가 적당…..</p>
			</section>
		</template>
	`
})
</script>


<script>
let kms = [];
for (let i = 1; i <= 100; i++) {
	kms.push({
		km: i * 1000,
		todos: []
	});
}


let todos = [
	["엔진오일", "10000"],
	["엔진 플러싱(세정)", "20000"],
	["점화플러그 & 코일,케이블", "30000"],
	["리스톤링 및 연소실 세척작업", "30000"],
	["가열(예열)플러그", "40000"],
	["흡기라인세척 작업", "30000"],
	["타이밍밸트", "80000"],
	["타이밍체인", "200000"],
	["구동벨트", "40000"],
	["엔진/밋션 마운팅 ", "100000"],
	["변속기(미션)오일", "40000"],
	["디프렌션오일", "40000"],
	["연료휠터", "30000"],
	["연료라인/인젝터세정", "30000"],
	["연료탱크 에어필터", "40000"],
	["브레이크패드", "30000"],
	["브레이크오일", "40000"],
	["브레이크 디스크 연마", "80000"],
	["부동액", "40000"],
	["냉각라인 세정", "40000"],
	["히터&에어컨휠터", "12000"],
	["에어컨필터", "5000"],
	["히터클리닉", "5000"],
	["와이퍼", "8000"],
	["에어컨 냉매 보충", "10000"],
	["에어컨 가스 및 냉동유 교환", "40000"],
	["통풍씨트 휠터", "40000"],
	["파워스티어링오일", "40000"],
	["타이어위치교환", "10000"],
	["휠얼라이먼트", "20000"],
	["배터리", "60000"],
];

todos.forEach(todo => {
	todo[1] = +todo[1];
});
todos.sort((a, b) => (a[1] - b[1]));


let t = [];
todos.forEach(todo => {
	for (let i = 0; i < 10; i++) {
		let _todo = todo.slice();
		_todo[2] = +_todo[1];
		_todo[1] = +_todo[1] * i;

		let index = _todo[1] / 1000 - 1;

		if (kms[index]) {
			kms[index].todos.push(_todo);
		}
		// t.push(_todo);
	}
});

todos = t;


kms.reverse();


let app = $module.compile(document.body);
app.arr = Array(8).fill(0);
app.arr2 = Array(5).fill(0);

app.kms = kms;


setTimeout(function() {
	let b = document.getElementById("b");
	let a = document.getElementById("a");
	let fix = a.scrollTop = b.getBoundingClientRect().bottom - a.offsetHeight + 120 + 40;

	a.onscroll = function() {
		app.currentKm = parseInt(fix - a.scrollTop);

		console.log(app.currentKm);
	}
});

</script>
</body>
</html>