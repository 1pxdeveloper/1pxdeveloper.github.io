<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Title</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/rxjs/6.4.0/rxjs.umd.min.js"></script>
</head>
<body>

<script>

const {Observable, fromEvent, merge, of} = rxjs;
const {share, switchMap, take, concat, takeUntil, repeat, scan, endWith, skipUntil} = rxjs.operators;


console.log(rxjs);


["press", "down", "panstart", "pan", "pan-x", "pan-y", "panend", "up", "releasae", "tap/click",
	"longpress", "dbl-tap", "swipe-up", "swipe-down", "swipe-left", "swipe-right"]


let mousedown$ = fromEvent(window, "mousedown", true).pipe(share());
let mousemove$ = fromEvent(window, "mousemove", true).pipe(share());
let mouseup$ = fromEvent(window, "mouseup", true).pipe(share());

let touchstart$ = fromEvent(window, "touchstart$", true).pipe(share());
let touchmove$ = fromEvent(window, "touchmove$", true).pipe(share());
let touchend$ = fromEvent(window, "touchend$", true).pipe(share());


let down$ = merge(mousedown$, touchstart$);
let up$ = merge(mouseup$, touchend$);
let move$ = merge(mousemove$, touchmove$);




let drag$ = new Observable(observer => {

	let $c;

	return mousedown$.subscribe(event => {

		observer.next(event);
		if ($c) $c.unsubscribe();

		$c = merge(mousemove$, mouseup$).subscribe(event => {

			observer.next(event);

			if (event.type === "mouseup") {
				$c.unsubscribe();
			}
		});
	});

});


drag$.subscribe(event => {

	console.log(event.type);
})



</script>

</body>
</html>